# avsdpll_study
- The Repository will give provide the details of week 3 letover which is essential to know before moving to any further training. The week 3 ingredients were essential and must not be weak for me. so here Let's break it down.
- This Verilog module, named `avsdpll`, models a simplified `digitally-controlled oscillator (DCO)` or `VCO-based PLL (Phase-Locked Loop)` in behavioral simulation. 
- It is not synthesizable, but it is useful for `simulation` of PLL-like behavior in testbenches.
  
✅ Module Ports

module avsdpll (
   output reg  CLK,     // Output clock signal generated by the VCO
   input  wire VCO_IN,  // Unused (possibly for extension)
   input  wire ENb_CP,  // Unused (possibly for extension)
   input  wire ENb_VCO, // Active-low enable for the VCO
   input  wire REF      // Reference clock input
);

| Signal   | Direction | Purpose                                           |
|----------|-----------|--------------------------------------------------|
| CLK      | output    | The output clock generated by the VCO            |
| VCO_IN   | input     | Not used in current implementation (might be for future use) |
| ENb_CP   | input     | Not used in current implementation (could control charge pump?) |
| ENb_VCO  | input     | Enable for the VCO (active-low, so 0 enables it) |
| REF      | input     | Reference clock input for adjusting the VCO output frequency |

✅ Internal Variables

```verilog
real period, lastedge, refpd;
```
- **period**: Current period of the output `CLK` signal (in nanoseconds).
- **lastedge**: Timestamp of the last rising edge on `REF`.
- **refpd**: Reference clock period (time between consecutive rising edges on `REF`).

```verilog
initial begin
   lastedge = 0.0;
   period = 25.0; // 25ns period = 40MHz
   CLK <= 0;
end
```
- Initializes the `clock period` to `25 ns` (→ `40 MHz` output frequency).
- Sets initial values for lastedge and `CLK`.

✅ Output Clock Generation (always @(CLK or ENb_VCO))

```verilog
always @(CLK or ENb_VCO) begin
   if (ENb_VCO == 1'b1) begin
      #(period / 2.0);
      CLK <= (CLK === 1'b0);
   end
   else if (ENb_VCO == 1'b0) begin
      CLK <= 1'b0;
   end 
   else begin
      CLK <= 1'bx;
   end
end
```

- If `ENb_VCO == 1` (VCO enabled), then the output CLK toggles every period/2. So the full period of CLK is period (`clock period` to `25 ns) as initialise earlier
- This generates a clock of frequency: f = 1 / period.
  
- If `ENb_VCO == 0`, the clock is `forced low` (off).
  
- If ENb_VCO is unknown (x), output goes to x.
**Note**: This is a behavioral clock generation style often used in simulations. *It wouldn't synthesize into hardware.*

✅ Period Adjustment (always @(posedge REF))
```
always @(posedge REF) begin
   if (lastedge > 0.0) begin
      refpd = $realtime - lastedge;
      period =  (refpd / 8.0);
   end
   lastedge = $realtime;
end
```
- Every rising edge of the REF clock:
- It measures the time since the last rising edge (refpd).
- Then, it sets the VCO clock period to 1/8th of the reference period.
- In other words, it tries to make the output frequency = 8 × REF frequency.

> [!TIP:Example:]
- If REF is 10 MHz (100 ns period), output CLK will try to be 80 MHz (period = 12.5 ns).
